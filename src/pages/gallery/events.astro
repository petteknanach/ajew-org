---
import Layout from '../../layouts/Layout.astro';

// Helper function to format filename for display
function formatFilename(filename) {
  let formatted = decodeURIComponent(filename);
  formatted = formatted.replace(/\.(jpg|jpeg|png|gif|webp)$/i, '');
  formatted = formatted.replace(/[-_]/g, ' ');
  formatted = formatted.replace(/\b\w/g, l => l.toUpperCase());
  return formatted;
}

const images = [
  'nanach-chaim-walden-head-fire-rabbainu.jpg',
  'nanach-eliyahu-gordetzky.jpg',
  'nanach-friends-aron-heuberger-aron-shilo-beanies.jpg',
  'nanach-gavriel-levi-uman-2.jpg',
  'nanach-gavriel-levi-uman.jpg',
  'nanach-hair-beanie-portrait.jpg',
  'nanach-meir-weiner-driver.jpg',
  'nanach-self-cave-portrait.jpg',
  'nanach-simcha-hochman-singing.jpg',
  'nanach-simcha-singing.jpg',
  'nanach-simcha-youcam.jpg',
  'nanach-snowman-sitting.jpg',
  'nanach-three-kids-saba-poster.jpg',
  'nanach-tzinor-layla-thumbnail.jpg',
  'nanach-tzvi-levin-guitar.jpg',
  'nanach-yisroel-dagan-playing-saba.jpg',
  'nanach-yosef-portrait.jpg',
  'nanach-yosef-saban-striemel-sticker.jpg',
];

// Organize images by category
const categories = {
  'simcha': {
    name: 'Simchas & Celebrations',
    hebrew: '×©××—×•×ª',
    icon: 'ğŸ‰',
    images: images.filter(img => img.includes('simcha') || img.includes('singing') || img.includes('hochman') || img.includes('dagan'))
  },
  'portraits': {
    name: 'Portraits',
    hebrew: '×“×™×•×§× ××•×ª',
    icon: 'ğŸ“¸',
    images: images.filter(img => img.includes('portrait') || img.includes('face') || img.includes('beanie') || img.includes('hair') || img.includes('yosef') || img.includes('self'))
  },
  'music': {
    name: 'Music & Instruments',
    hebrew: '××•×–×™×§×”',
    icon: 'ğŸµ',
    images: images.filter(img => img.includes('guitar') || img.includes('levin') || img.includes('tzinor'))
  },
  'friends': {
    name: 'Friends & Gathering',
    hebrew: '×—×‘×¨×™×',
    icon: 'ğŸ‘¥',
    images: images.filter(img => img.includes('friends') || img.includes('kids') || img.includes('gordetzky') || img.includes('weiner') || img.includes('gavriel'))
  },
  'other': {
    name: 'Events Gallery',
    hebrew: '××™×¨×•×¢×™×',
    icon: 'ğŸª',
    images: images.filter(img => !img.includes('simcha') && !img.includes('singing') && !img.includes('hochman') && !img.includes('dagan') && !img.includes('portrait') && !img.includes('face') && !img.includes('beanie') && !img.includes('hair') && !img.includes('yosef') && !img.includes('self') && !img.includes('guitar') && !img.includes('levin') && !img.includes('tzinor') && !img.includes('friends') && !img.includes('kids') && !img.includes('gordetzky') && !img.includes('weiner') && !img.includes('gavriel'))
  }
};
---

<Layout title="Events Gallery" description="Photos from Na Nach events, simchas, and gatherings">
  <section class="page-header">
    <h1>âœ¡ Events & Gatherings âœ¡</h1>
    <p>Simchas, celebrations, and Na Nach events around the world</p>
    <p class="hebrew">××™×¨×•×¢×™× ×•×©××—×•×ª ×  × ×— ××›×œ ×”×¢×•×œ×</p>
    <a href="/gallery" class="back-link">â† Back to Gallery</a>
  </section>

  <section class="intro">
    <div class="container">
      <div class="info-box">
        <h2>ğŸ‰ Celebrating Together</h2>
        <p>
          Photos from Na Nach events, simchas, and gatherings from around the world. 
          From singing gatherings to celebrations with friends, these moments capture 
          the joy and unity of the Na Nach Breslov movement.
        </p>
        <p class="hebrew">
          ×ª××•× ×•×ª ×××™×¨×•×¢×™ ×  × ×—, ×©××—×•×ª, ×•×”×ª×›× ×¡×•×™×•×ª ××›×œ ×”×¢×•×œ×
        </p>
      </div>
    </div>
  </section>

  <section class="gallery">
    <div class="container">
      {Object.entries(categories).map(([key, cat]) => (
        cat.images.length > 0 && (
          <div class="category-section">
            <h2><span class="icon">{cat.icon}</span> {cat.name} <span class="hebrew">({cat.hebrew})</span></h2>
            <div class="gallery-grid">
              {cat.images.map((img, index) => (
                <div class="gallery-item">
                  <img src={`/images/events/${img}`} alt={formatFilename(img)} loading="lazy" />
                  <div class="overlay">
                    <span>{cat.name} #{index + 1}</span>
                  </div>
                  <div class="caption">{formatFilename(img)}</div>
                </div>
              ))}
            </div>
          </div>
        )
      ))}
    </div>
  </section>

  <section class="navigation">
    <div class="container">
      <div class="nav-buttons">
        <a href="/gallery/nanach" class="nav-btn prev">
          <span class="arrow">â†</span>
          <span class="text">Na Nach Life</span>
        </a>
        <a href="/teachings" class="nav-btn next">
          <span class="text">Teachings</span>
          <span class="arrow">â†’</span>
        </a>
      </div>
    </div>
  </section>
</Layout>

<style>
  .page-header {
    background: linear-gradient(135deg, #553c9a 0%, #44337a 100%);
    color: white;
    padding: 5rem 2rem;
    text-align: center;
  }

  .page-header h1 {
    font-family: var(--font-hebrew);
    font-size: 2.5rem;
    margin-bottom: 0.5rem;
  }

  .page-header p {
    opacity: 0.9;
    font-size: 1.2rem;
    margin-bottom: 0.5rem;
  }

  .page-header .hebrew {
    font-family: var(--font-hebrew);
    font-size: 1.5rem;
    margin-top: 1rem;
  }

  .back-link {
    display: inline-block;
    margin-top: 1.5rem;
    color: white;
    text-decoration: none;
    padding: 0.75rem 1.5rem;
    border: 2px solid white;
    border-radius: 6px;
  }

  .container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 2rem;
  }

  .intro {
    background: #f7f5f0;
    padding: 4rem 0;
  }

  .info-box {
    max-width: 800px;
    margin: 0 auto;
    padding: 2rem;
    background: white;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    text-align: center;
  }

  .info-box h2 {
    font-family: var(--font-hebrew);
    color: var(--color-primary);
    margin-bottom: 1rem;
  }

  .info-box p {
    font-size: 1.1rem;
    line-height: 1.8;
    color: #555;
    margin-bottom: 1rem;
  }

  .info-box .hebrew {
    font-family: var(--font-hebrew);
    font-size: 1.3rem;
    color: #553c9a;
  }

  .category-section {
    padding: 4rem 0;
    border-bottom: 1px solid #eee;
  }

  .category-section:last-child {
    border-bottom: none;
  }

  .category-section h2 {
    font-family: var(--font-hebrew);
    font-size: 1.8rem;
    color: var(--color-primary);
    margin-bottom: 2rem;
    text-align: center;
  }

  .category-section h2 .hebrew {
    font-family: var(--font-hebrew);
    font-size: 1.4rem;
    color: #888;
    font-weight: normal;
  }

  .gallery-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 1.5rem;
  }

  .gallery-item {
    position: relative;
    overflow: visible;
  }

  .gallery-item img {
    width: 100%;
    aspect-ratio: 1;
    object-fit: cover;
    border-radius: 12px;
    transition: transform 0.4s;
    display: block;
  }

  .gallery-item:hover img {
    transform: scale(1.08);
  }

  .gallery-item .overlay {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    background: linear-gradient(transparent, rgba(0,0,0,0.7));
    padding: 2rem 1rem 1rem;
    opacity: 0;
    transition: opacity 0.3s;
  }

  .gallery-item:hover .overlay {
    opacity: 1;
  }

  .gallery-item .overlay span {
    color: white;
    font-size: 0.95rem;
  }

  .gallery-item .caption {
    padding: 0.75rem;
    background: #f8f8f8;
    font-size: 0.85rem;
    color: #555;
    text-align: center;
    border-bottom-left-radius: 12px;
    border-bottom-right-radius: 12px;
    word-break: break-word;
    line-height: 1.4;
  }

  .navigation {
    background: var(--color-primary);
    padding: 3rem 0;
    margin-top: 2rem;
  }

  .nav-buttons {
    display: flex;
    justify-content: space-between;
    gap: 1rem;
  }

  .nav-btn {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    color: white;
    text-decoration: none;
    padding: 1rem 1.5rem;
    background: rgba(255,255,255,0.1);
    border-radius: 8px;
  }

  .nav-btn:hover {
    background: rgba(255,255,255,0.2);
  }

  @media (max-width: 768px) {
    .nav-buttons {
      flex-direction: column;
    }
    
    .gallery-grid {
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    }
  }
</style>
